"use strict";(self["webpackChunkcontacts"]=self["webpackChunkcontacts"]||[]).push([[81],{4081:function(t,e,a){a.r(e),a.d(e,{default:function(){return $}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main",class:t.classes},[e("div",{staticClass:"w-75",staticStyle:{display:"flex","justify-content":"space-evenly","align-items":"center",cursor:"pointer"}},[e("h4",[t._v("Contacts")]),e("choose-table-view",{on:{updateTable:t.updateTableView}}),e("b-icon",{attrs:{icon:"arrow-clockwise","font-scale":"3"},on:{click:t.updateAllContent}})],1),t.isAdmin?e("div",{staticClass:"w-50 mt-4"},[e("div",[e("b-form-select",{staticClass:"mb-3",scopedSlots:t._u([{key:"first",fn:function(){return[e("b-form-select-option",{attrs:{value:"null"}},[t._v("Не выбрано")])]},proxy:!0}],null,!1,2635780493),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[e("b-form-select-option",{attrs:{value:"name"}},[t._v("По полному имени")]),e("b-form-select-option",{attrs:{value:"gender"}},[t._v("По половому признаку")]),e("b-form-select-option",{attrs:{value:"national"}},[t._v("По национальности")])],1),"name"===t.selected?e("b-form-input",{attrs:{placeholder:"Введите имя"},model:{value:t.searchName,callback:function(e){t.searchName=e},expression:"searchName"}}):t._e(),"gender"===t.selected?e("b-form-group",{attrs:{label:"Введите пол"},scopedSlots:t._u([{key:"default",fn:function({ariaDescribedby:a}){return[e("b-form-radio",{attrs:{"aria-describedby":a,name:"some-radios",value:"male"},model:{value:t.searchGender,callback:function(e){t.searchGender=e},expression:"searchGender"}},[t._v(" мужской ")]),e("b-form-radio",{attrs:{"aria-describedby":a,name:"some-radios",value:"female"},model:{value:t.searchGender,callback:function(e){t.searchGender=e},expression:"searchGender"}},[t._v(" женский ")])]}}],null,!1,2638716675)}):t._e(),"national"===t.selected?e("b-form-input",{attrs:{placeholder:"Введите национальность"},model:{value:t.searchNational,callback:function(e){t.searchNational=e},expression:"searchNational"}}):t._e()],1)]):t._e(),e("keep-alive",["tabular"===t.tableView?e("div",{staticClass:"mt-4"},[e("tabular-table",{attrs:{page:t.page,limit:t.limit,filter:t.selected,searchName:t.searchName,searchGender:t.searchGender,searchNational:t.searchNational}})],1):e("div",{staticClass:"mt-4"},[e("tiled-table",{attrs:{page:t.page,limit:t.limit,filter:t.selected,searchName:t.searchName,searchGender:t.searchGender,searchNational:t.searchNational}})],1)]),e("div",{staticClass:"mt-3 page__wrapper"},t._l(t.filteredPages,(function(a){return e("div",{key:a,staticClass:"page",class:{"current-page":t.page===a},on:{click:function(e){return t.changePage(a)}}},[t._v(" "+t._s(a)+" ")])})),0)],1)},n=[],i=function(){var t=this,e=t._self._c;return e("b-dropdown",{attrs:{text:"Вид"}},[e("b-dropdown-item",{on:{click:function(e){return t.setView("tabular")}}},[t._v("табличный")]),e("b-dropdown-item",{on:{click:function(e){return t.setView("tiled")}}},[t._v("плиточный")])],1)},r=[],o={name:"ChooseTableView",methods:{setView(t){this.$store.commit("setTableView",t),localStorage.setItem("tableView",t),this.$emit("updateTable",t)}}},l=o,c=a(1001),u=(0,c.Z)(l,i,r,!1,null,null,null),d=u.exports,m=function(){var t=this,e=t._self._c;return e("div",[e("table",{staticClass:"table"},[e("thead",[e("tr",[e("th",[t._v("Avatar")]),e("th",{staticClass:"fullname",on:{click:function(e){return t.sortContacts(1)}}},[t._v("Fullname")]),e("th",[t._v("Birthday")]),e("th",[t._v("Email")]),e("th",[t._v("Phone")]),e("th",[t._v("Location")]),e("th",[t._v("Национальность")])])]),e("tbody",t._l(t.PagSortContacts,(function(a){return e("tr",{key:a.email},[e("td",[e("img",{attrs:{src:a.picture.thumbnail,alt:"thumbnail"}})]),e("td",[t._v(t._s(a.name.title)+" "+t._s(a.name.first)+" "+t._s(a.name.last))]),e("td",[t._v(" "+t._s(new Date(a.dob.date).toLocaleString("ru",t.options))+", "+t._s(new Intl.DateTimeFormat("en-US",t.options2).format(new Date(a.dob.date)))+", "+t._s(new Date(a.dob.date).toLocaleString("ru",t.options3))+", "+t._s(a.dob.age)+" ")]),e("td",{staticClass:"copied-field",on:{click:function(e){return t.copyValue(a.email)}}},[t._v(t._s(a.email))]),e("td",{staticClass:"copied-field",on:{click:function(e){return t.copyValue(a.phone)}}},[t._v(t._s(a.phone))]),e("td",[t._v(t._s(a.location.country)+", "+t._s(a.location.city))]),e("td",[t._v(t._s(a.nat))])])})),0)]),e("br"),e("h3",[t._v("Статистика")]),e("table",{staticClass:"table2"},[t._m(0),e("tbody",[e("tr",[e("td",[t._v(t._s(t.sizeCollection))]),e("td",[t._v(t._s(t.AmountMaleGender))]),e("td",[t._v(t._s(t.AmountFemaleGender))]),e("td",[t._v("0")]),e("td",[e("strong",[t._v(t._s(t.isMore))])])])])]),e("table",[t._m(1),e("tbody",[e("tr",t._l(t.amountContacts,(function(a){return e("td",{staticStyle:{display:"flex"}},[t._v(" "+t._s(a[0])+" - "+t._s(a[1])+" ")])})),0)])])])},h=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("Размер"),e("br"),t._v(" коллекции")]),e("th",[t._v("Количество"),e("br"),t._v(" мужчин")]),e("th",[t._v("Количество"),e("br"),t._v(" женщин")]),e("th",[t._v("Количество"),e("br"),t._v(" неопределевшихся")]),e("th",[t._v("Больше")])])])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("Количество контактов"),e("br"),t._v(" по каждой национальности")])])])}],p=a(7347),_=a.n(p),f=a(408),b={props:{filter:{type:String},searchName:{type:String},searchGender:{type:String},searchNational:{type:String},page:{type:Number},limit:{type:Number}},data(){return{options:{weekday:"long"},options2:{year:"numeric",month:"numeric",day:"numeric"},options3:{hour:"numeric",minute:"numeric"},counter:0}},computed:{...(0,f.Se)(["allContacts"]),contacts(){const t=this.$store.getters.allContacts;if("name"===this.filter&&this.searchName){this.$store.commit("filterByNameContacts",this.searchName);const t=this.$store.getters.filteredContacts;return t}if("gender"===this.filter&&this.searchGender){this.$store.commit("filterByGenderContacts",this.searchGender);const t=this.$store.getters.filteredContacts;return t}if("national"===this.filter&&this.searchNational){this.$store.commit("filterByNationalContacts",this.searchNational);const t=this.$store.getters.filteredContacts;return t}return t},paginationContacts(){let t=(this.page-1)*this.limit,e=t+this.limit;if(this.filter){const t=this.contacts.length;this.$store.commit("actualLengthContacts",t)}return this.contacts.slice(t,e)},PagSortContacts(){const t=this.paginationContacts;if(1===this.counter){const e=t.slice().sort(((t,e)=>t.name.first.toLowerCase().localeCompare(e.name.first.toLowerCase())));return e}if(2===this.counter){const e=t.slice().sort(((t,e)=>e.name.first.toLowerCase().localeCompare(t.name.first.toLowerCase())));return e}return 3===this.counter?t:this.paginationContacts},sizeCollection(){return this.$store.getters.allContactsLength},AmountMaleGender(){return this.$store.getters.AmountMaleGender},AmountFemaleGender(){return this.$store.getters.AmountFemaleGender},isMore(){return this.AmountMaleGender>this.AmountFemaleGender?"мужчин":"женщин"},amountContacts(){const t=Object.entries(this.$store.getters.getAllNationalities);return t}},methods:{copyValue(t){navigator.clipboard.writeText(t),_().fire({position:"center",icon:"success",title:"Скопировано!",showConfirmButton:!1,timer:1500})},sortContacts(t){this.counter+=t,3===this.counter&&(this.counter=0)}}},v={name:"TiledTable",mixins:[b]},g=v,C=(0,c.Z)(g,m,h,!1,null,"4da43c6d",null),y=C.exports,w=function(){var t=this,e=t._self._c;return e("div",{staticClass:"d-flex tiled-view justify-content-center"},t._l(t.paginationContacts,(function(a){return e("div",{key:a.email},[e("b-card",{staticStyle:{width:"300px",height:"600px"},attrs:{"no-body":"","img-src":a.picture.large,"img-alt":"Image","img-top":""},scopedSlots:t._u([{key:"header",fn:function(){return[e("h4",{staticClass:"mb-0"},[t._v(" "+t._s(a.name.title)+" "+t._s(a.name.first)+" "+t._s(a.name.last)+" ")])]},proxy:!0}],null,!0)},[e("b-card-body",[e("b-card-sub-title",[t._v(" "+t._s(new Date(a.dob.date).toLocaleString("ru",t.options))+", "+t._s(new Intl.DateTimeFormat("en-US",t.options2).format(new Date(a.dob.date)))+", "+t._s(new Date(a.dob.date).toLocaleString("ru",t.options3))+", "+t._s(a.dob.age)+" ")])],1),e("b-list-group",{attrs:{flush:""}},[e("b-list-group-item",{staticClass:"copied-field",on:{click:function(e){return t.copyValue(a.email)}}},[t._v(" Email: "+t._s(a.email)+" ")]),e("b-list-group-item",{staticClass:"copied-field",on:{click:function(e){return t.copyValue(a.phone)}}},[t._v(" Phone: "+t._s(a.phone)+" ")]),e("b-list-group-item",[t._v(" "+t._s(a.location.country)+", "+t._s(a.location.city)+" ")]),e("b-list-group-item",[t._v(t._s(a.nat))])],1)],1)],1)})),0)},k=[],N={name:"TiledTable",mixins:[b]},G=N,S=(0,c.Z)(G,w,k,!1,null,"1ed06e13",null),x=S.exports,V={name:"ContactPage",components:{ChooseTableView:d,TabularTable:y,TiledTable:x},data(){return{tableView:localStorage.getItem("tableView")||"tabular",page:1,limit:10,selected:"",totalPage:"",searchName:"",totalPages:null,searchGender:"",searchNational:"",countAllContacts:200}},computed:{isAdmin(){const t=localStorage.getItem("role");return"admin"===t},classes(){return{"main-tiled":"tiled"===this.tableView&&!this.selected}},filteredPages(){const t=this.$store.getters.countFilteredContacts;if(t){const e=Math.ceil(t/this.limit);return e}if(0===t){const t=0;return t}const e=Math.ceil(this.countAllContacts/this.limit);return e}},async mounted(){this.totalPages=Math.ceil(this.countAllContacts/this.limit),this.$store.dispatch("fetchContacts")},methods:{updateTableView(t){this.tableView=t},changePage(t){this.page=t},updateAllContent(){this.$store.dispatch("fetchContacts")}}},T=V,A=(0,c.Z)(T,s,n,!1,null,"69aac700",null),$=A.exports}}]);
//# sourceMappingURL=81.c1f538f4.js.map